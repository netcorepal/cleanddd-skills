---
name: cleanddd-modeling
description: 基于CleanDDD的软件系统分析建模技能
---

# CleanDDD 建模技能

根据用户需求，设计符合CleanDDD原则的业务模型，包括聚合、命令、事件、查询等，确保模型的清晰性和可维护性。

## 核心原则

- 聚合之间边界明确不相互引用
- 聚合之间不共享实体，允许共享值对象
- 领域事件由聚合行为产生


## 需求分析流程

1. 将需求拆分为可执行条目（查看/创建/修改/关闭等），保持粒度清晰。
2. 识别可承担条目的聚合，列出“聚合 → 需求条目”映射，确保职责内聚。
3. 分析聚合间的相互影响：某聚合操作触发哪些后续动作（DomainEvent）以及对应的 DomainEventHandler。
4. 将需求条目映射为 Command、Query、Endpoint、DomainEvent、DomainEventHandler，并注明所属聚合。

## 最佳实践

- 将用户需求拆解为聚合职责，由命令、查询满足需求；跨聚合协作通过领域事件驱动。

## 输出格式

- 使用结构化 Markdown，便于 Agent 解析与生成代码
- 推荐包含以下部分：
	- 概览表：聚合、职责摘要、关键命令/查询数、主要事件
	- 需求条目表：需求ID | 场景描述 | 所属聚合 | 操作类型(Command/Query) | 备注
	- 聚合定义表：聚合 | 实体/值对象 | 不变式 | 关键行为(Command) | 读模型(Query)
	- 事件流表：DomainEvent | 触发聚合/操作 | 订阅方 | 处理动作 | 副作用/结果
	- Endpoint/接口表：Endpoint | 方法 | Command/Query | 认证/鉴权 | 幂等/一致性说明
- 可选 Mermaid：与表格命名保持一致，方便核对
- 统一命名与大小写：聚合/事件/命令用 PascalCase，枚举值用固定拼写
- 标明默认值与可选值，减少交互询问
- 在最终输出附“参数汇总 + 是否执行”提示，便于 Agent 向用户确认再行动